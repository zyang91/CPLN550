acs_2022 <- load_variables(2022, dataset="acs5")
acsVaraibles <- c(totpop = "B01001_001",
tot_commute="B08006_001",
bikers ="B08006_014",
median_age="B01002_001"
)
Philiy_acs_2022 <- get_acs(geography="tract",
variables=acsVaraibles,
state="PA",
county="Philadelphia",
survey='acs5',
year=2022,
output="wide",
geometry=TRUE)
View(Philiy_acs_2022)
Philiy_acs_2022 <- Philiy_acs_2022 %>%
mutate(bike_rate = bikers/tot_commute)
Philiy_acs_2022 <- Philiy_acs_2022 %>%
mutate(bike_rate = bikersE/tot_commuteE)
st_write(Philiy_acs_2022, "Philiy_acs_2022.gpkg")
ibrary(ggplot2)
library(ggplot2)
# Create the data
flow <- seq(0, 2000, length.out = 100)
speed <- ifelse(flow <= 500, 60,
ifelse(flow <= 1000, 60 - 0.03 * (flow - 500),
ifelse(flow <= 1500, 45 - 0.04 * (flow - 1000),
30 - 0.02 * (flow - 1500))))
# Create a data frame
data <- data.frame(flow = flow, speed = speed)
ggplot(data, aes(x = flow, y = speed)) +
geom_line(color = "blue") +
geom_vline(xintercept = c(300, 700, 1000, 1300, 1600, 1800),
linetype = "dashed",
color = c("green", "lime", "yellow", "orange", "red", "darkred"))
ggplot(data, aes(x = flow, y = speed))
ggplot(data, aes(x = flow, y = speed)) +
geom_line(color = "blue") +
geom_vline(xintercept = c(300, 700, 1000, 1300, 1600, 1800),
linetype = "dashed",
color = c("green", "lime", "yellow", "orange", "red", "darkred")) +
annotate("text", x = c(100, 500, 850, 1150, 1450, 1700),
y = c(62, 62, 50, 45, 35, 25),
label = c("A", "B", "C", "D", "E", "F"),
color = c("green", "lime", "yellow", "orange", "red", "darkred"),
size = 4) +
labs(title = "Speed-Flow Diagram for a Major One-Way, Two-Lane Urban Arterial",
x = "Flow (vehicles per hour)",
y = "Speed (km/h)") +
theme_minimal() +
theme(plot.title = element_text(hjust = 0.5)) +
scale_x_continuous(limits = c(0, 2000)) +
scale_y_continuous(limits = c(0, 65)) +
theme(panel.grid.major = element_line(size = 0.8),
panel.grid.minor = element_line(size = 0.5))
ggplot(data, aes(x = flow, y = speed)) +
geom_line(color = "blue") +
geom_vline(xintercept = c(300, 700, 1000, 1300, 1600, 1800),
linetype = "dashed",
color = c("green", "blue", "yellow", "orange", "red", "darkred")) +
annotate("text", x = c(100, 500, 850, 1150, 1450, 1700),
y = c(62, 62, 50, 45, 35, 25),
label = c("A", "B", "C", "D", "E", "F"),
color = c("green", "blue", "yellow", "orange", "red", "darkred"),
size = 4) +
labs(title = "Speed-Flow Diagram for a Major One-Way, Two-Lane Urban Arterial",
x = "Flow (vehicles per hour)",
y = "Speed (km/h)") +
theme_minimal() +
theme(plot.title = element_text(hjust = 0.5)) +
scale_x_continuous(limits = c(0, 2000)) +
scale_y_continuous(limits = c(0, 65)) +
theme(panel.grid.major = element_line(size = 0.8),
panel.grid.minor = element_line(size = 0.5))
View(data)
ggplot(data, aes(x = flow, y = speed)) +
geom_point(color = "blue") +
geom_vline(xintercept = c(300, 700, 1000, 1300, 1600, 1800),
linetype = "dashed",
color = c("green", "blue", "yellow", "orange", "red", "darkred")) +
annotate("text", x = c(100, 500, 850, 1150, 1450, 1700),
y = c(62, 62, 50, 45, 35, 25),
label = c("A", "B", "C", "D", "E", "F"),
color = c("green", "blue", "yellow", "orange", "red", "darkred"),
size = 4) +
labs(title = "Speed-Flow Diagram for a Major One-Way, Two-Lane Urban Arterial",
x = "Flow (vehicles per hour)",
y = "Speed (km/h)") +
theme_minimal() +
theme(plot.title = element_text(hjust = 0.5)) +
scale_x_continuous(limits = c(0, 2000)) +
scale_y_continuous(limits = c(0, 65)) +
theme(panel.grid.major = element_line(size = 0.8),
panel.grid.minor = element_line(size = 0.5))
year <- c(1950, 1960, 1970, 1980, 1990, 2000, 2010)
population <- c(2071605,2002512,1948609,1688210,1585577,1517550,1526006)
dat <- cbind.data.frame(year, population)
mod.1 <- lm(population ~ year, data = dat)
summary(mod.1)
mod.2 <- lm(population ~ year+I(year^2) , data =dat)
summary(mod.2)
mod.3 <- lm(population ~ year + pop_lag, data = dat)
ASK: finally, let's try a model with lag
library(tidyverse)
#first, let's create a population with 10 year lag (i.e., shifting one row down)
dat <- dat %>% mutate(pop_lag = lag(population, 1))
mod.3 <- lm(population ~ year + pop_lag, data = dat)
summary(mod.3)
library(tidyverse)
library(sf)
library(tidycensus)
pluto <- st_read("labs_exercises/flood_risk_spatial_join/data/MapPLUTO24v3_1.gdb",
query = "select * from MapPLUTO_24v3_1_clipped where Borough = 'BK'", quiet = TRUE)
pluto <- st_read("MapPLUTO24v3_1.gdb",
query = "select * from MapPLUTO_24v3_1_clipped where Borough = 'BK'", quiet = TRUE)
pluto <- st_read("MapPLUTO24v3_1.gdb",
query = "select * from MapPLUTO_24v3_1_clipped where Borough = 'BK'", quiet = TRUE)
pluto <- st_read(("MapPLUTO24v3_1.gdb"),
query = "select * from MapPLUTO_24v3_1_clipped where Borough = 'BK'", quiet = TRUE)
pluto <- st_read(("MapPLUTO24v3_1.gdb"),
query = "select * from MapPLUTO_24v3_1_clipped where Borough = 'BK'", quiet = TRUE)
pluto <- st_read(("/Users/apple/Desktop/CPLN503/in_class_excercise/In_class_excercise_octo17th/MapPLUTO24v3_1.gdb"),
query = "select * from MapPLUTO_24v3_1_clipped where Borough = 'BK'", quiet = TRUE)
pluto <- pluto %>%
mutate(ARA = case_when(ResArea == 0 & UnitsRes != 0 ~ 1 * (BldgArea * (UnitsRes/UnitsTotal)) + ResArea,
ResArea > 0 ~ ResArea,
TRUE ~ 0))
bk_bg <- get_acs(geography = "block group",
variables = c(bg_tot_pop = "B03002_001",
bg_white_nh = "B03002_003" ,
bg_black_nh = "B03002_004",
bg_asian_nh = "B03002_006" ,
bg_native_hawaiian = "B03002_007",
bg_other_nh = "B03002_008",
bg_two_more_nh = "B03002_009",
bg_hispanic = "B03002_012"),
year = 2021, output = "wide",
geometry = TRUE, state = "NY",
county = "Kings", survey = "acs5",
progress = FALSE)
bk_tracts <-get_acs(geography = "tract",
variables = c(tract_tot_pop = "B03002_001",
tract_white_nh = "B03002_003",
tract_black_nh = "B03002_004",
tract_asian_nh = "B03002_006",
tract_native_hawaiian = "B03002_007",
tract_other_nh = "B03002_008" ,
tract_two_more_nh = "B03002_009",
tract_hispanic = "B03002_012" ),
year = 2021, output = "wide",
geometry = TRUE, state = "NY",
county = "Kings", survey = "acs5",
progress = FALSE)
pluto <- st_transform(pluto, crs = st_crs(bk_bg))
pluto <- pluto %>%
st_join(bk_bg %>% select(block_group_2021 = GEOID, 3, 5, 7, 9, 11, 13, 15, 17))
pluto <- pluto %>%
st_join(bk_tracts %>%
select(tract_2021 = GEOID, 3, 5, 7, 9, 11, 13, 15, 17))
pluto <- pluto %>%
select(Borough, Address, OwnerName, LotArea, BldgArea,
ResArea, UnitsRes, ARA, block_group_2021,
starts_with("bg_"), tract_2021, starts_with("tract_"))
bk_bg_units <- pluto |>
as_tibble() |>
group_by(block_group_2021) |>
summarise(bg_res_units = sum(UnitsRes, na.rm = TRUE),
bg_ARA = sum(ARA, na.rm = TRUE))
bk_tract_units <- pluto |>
as_tibble() |>
group_by(tract_2021) |>
summarise(tract_res_units = sum(UnitsRes, na.rm = TRUE),
tract_ARA = sum(ARA, na.rm = TRUE))
pluto <- pluto |>
left_join(bk_bg_units)
pluto <- pluto |>
left_join(bk_tract_units)
pluto <- pluto %>%
ungroup() %>%
mutate(bg_tot_dasym = case_when(UnitsRes == 0 & ResArea != 0 ~
bg_tot_popE * (ARA/bg_ARA),
UnitsRes > 0 ~ bg_tot_popE * (UnitsRes/bg_res_units),
TRUE ~ 0),
tract_tot_dasym = case_when(UnitsRes == 0 & ResArea != 0 ~
tract_tot_popE * (ARA/tract_ARA),
UnitsRes > 0 ~ tract_tot_popE * (UnitsRes/tract_res_units),
TRUE ~ 0))
tract_ru_totals <- pluto |>
as_tibble() |>
group_by(tract_2021) |>
summarise(tract_ru_est = sum(tract_tot_dasym, na.rm = TRUE))
tract_ru_totals <- tract_ru_totals |>
inner_join(bk_tracts |>
select(GEOID, tract_tot_popE), by = c("tract_2021" = "GEOID"))
floods <- st_read("https://data.cityofnewyork.us/api/geospatial/ezfn-5dsb?method=export&format=GeoJSON", )
floods <- st_make_valid(floods)
floods <- floods |>
st_transform(crs = st_crs(pluto)) |>
st_union(by_feature = FALSE) |>
st_as_sf()
floods <- floods |>
mutate(flood_plain = "100-Year") |>
rename(geometry = x)
bk_bg_floods <- bk_bg |>
st_join(floods) |>
as_tibble() |>
group_by(flood_plain) |>
summarise(flood_pop_bg = sum(bg_tot_popE, na.rm = TRUE)) |>
mutate(flood_plain = if_else(is.na(flood_plain), "Not in plain", flood_plain))
bk_tract_flood <- bk_tracts |>
st_join(floods) |>
as_tibble() |>
group_by(flood_plain) |>
summarise(flood_pop_tract = sum(tract_tot_popE, na.rm = TRUE)) |>
mutate(flood_plain = if_else(is.na(flood_plain), "Not in plain", flood_plain))
pluto_res <- pluto |>
filter(bg_tot_dasym > 0 | tract_tot_dasym > 0)
pluto_non_res <- pluto |>
filter((is.na(ResArea) | ResArea == 0) & (UnitsRes == 0 | is.na(UnitsRes)))
pluto_floods <- pluto_res |>
st_join(floods)
pluto_floods <- pluto_floods |>
as_tibble() |>
group_by(flood_plain) |>
summarise(flood_pop_bg_dasym = sum(bg_tot_dasym, na.rm = TRUE),
flood_pop_tract_dasym = sum(tract_tot_dasym, na.rm = TRUE)) |>
mutate(flood_plain = if_else(is.na(flood_plain), "Not in plain", flood_plain))
pluto_floods <- pluto_floods |>
left_join(bk_tract_flood) |>
left_join(bk_bg_floods)
View(pluto_floods)
pak::pkg_install("elipousson/crashapi")
install.packages("pak")
library(pak)
pak::pkg_install("elipousson/crashapi")
library(crashapi)
library(ggplot2)
md_summary <-
get_fars(
year = c(2010, 2021),
state = "MD",
api = "summary count"
)
ggplot(md_summary, aes(x = CaseYear, y = TotalFatalCounts)) +
geom_point(color = "red") +
geom_line(color = "red", group = 1) +
theme_minimal()
View(md_summary)
crashes_sf <-
get_fars(
year = c(2018, 2021),
state = "NC",
county = "Wake County",
geometry = TRUE
)
library(crashapi)
library(tidyverse)
crashes_autauga2022 <-
get_fars(
year = 2022,
state = "AL",
county = "Autauga County",
details = TRUE
)
View(crashes_autauga2022)
autauga2022<-crashes_autauga2022 %>%
select(CITYNAME,
FATALS)
View(autauga2022)
autauga2022$CEvents
CEvents <- autauga2022 %>%
group_by(CITYNAME) %>%
summarise(Fatalities = sum(FATALS))
library(crashapi)
library(tidyverse)
crashes_autauga2022 <-
get_fars(
year = 2022,
state = "AL",
county = "Autauga County",
details = TRUE
)
per <-read_csv("/Users/apple/Desktop/person.csv")
crashes_broome <-
get_fars(
year=2022,
state="NY",
county="Broome County",
details=TRUE
)
View(crashes_broome)
per %>%
select(AGE)
crashes_broome %>%
select(AGE)
library(crashapi)
library(tidyverse)
crashes_autauga2022 <-
get_fars(
year = 2022,
state = "AL",
county = "Autauga County",
details = TRUE
)
full <- bind_rows(crashes_autauga2022, .id = "column_label") %>%  select(where(is.list)) %>%
names() %>%
reduce(~ unnest_longer(.x, all_of(.y)), .init = full)
crashes_autauga2022 <- bind_rows(crashes_autauga2022, .id = "column_label") %>%  select(where(is.list)) %>%
names() %>%
reduce(~ unnest_longer(.x, all_of(.y)), .init = full)
full <- bind_rows(crashes_autauga2022, .id = "column_label") %>%  select(where(is.list)) %>%
names() %>%
reduce(~ unnest_longer(.x, all_of(.y)), .init = crashes_autauga2022)
View(full)
full <- full %>%
select(NPERSONS$AGE)
View(full)
View(full)
View(crashes_autauga2022)
crashes_autauga2022 %>%
select(NPersons)
persons<- crashes_autauga2022 %>%
select(NPersons)
View(persons)
View(full)
View(crashes_autauga2022)
View(persons)
write.csv(full, 'year.csv')
View(full)
full <- bind_rows(crashes_autauga2022, .id = "column_label") %>%
select(where(is.list))
View(full)
full <- bind_rows(crashes_autauga2022, .id = "column_label") %>%
select(where(is.list))%>%
names()
library(purrr)
full <- bind_rows(crashes_autauga2022, .id = "column_label") %>%
select(where(is.list))%>%
names() %>%
reduce(~ unnest_longer(.x, all_of(.y)), .init = crashes_autauga2022)
View(full)
full <- bind_rows(crashes_autauga2022, .id = "column_label") %>%
select(where(is.list))%>%
names() %>%
reduce(~ unnest_longer(.x, all_of(.y)), .init = crashes_autauga2022)%>%
select(NPersons$AGE)
full <- bind_rows(crashes_autauga2022, .id = "column_label") %>%
select(where(is.list))%>%
names() %>%
reduce(~ unnest_longer(.x, all_of(.y)), .init = crashes_autauga2022)%>%
select("NPersons$AGE")
rlang::last_trace()
full <- bind_rows(crashes_autauga2022, .id = "column_label") %>%
select(where(is.list))%>%
names() %>%
reduce(~ unnest_longer(.x, all_of(.y)), .init = crashes_autauga2022)
View(full)
age <- full %>%
select(contains("AGE"))
View(age)
head(full)
colnames()
str(full)
Npersons <- data.frame(full$NPersons)
View(Npersons)
View(full)
library(tidyverse)
setwd("/Users/apple/Desktop/CPLN550/Data")
load("TS2.1TimeSeriesOpExpSvcModeTOS2021.Rda")
NTD19<- NTD.ts %>%
filter(Year==2019)
NTD19<-NTD19 %>%
filter(PMT!=0)
NTD19_a<- NTD19 %>%
group_by(Mode) %>%
summarise(mean_ratio = mean(PMT / UPT))
View(NTD19_a)
NTD.19 <- subset(NTD.ts, Year == 2019)
#a.	Passenger miles (PMT) per unlinked passenger trip (UPT)
mean(NTD.19$PMT[NTD.19$Mode == "LR" & NTD.19$PMT != 0]/NTD.19$UPT[NTD.19$Mode == "LR" & NTD.19$PMT != 0], na.rm = T)
mean(NTD.19$PMT[NTD.19$Mode == "HR" & NTD.19$PMT != 0]/NTD.19$UPT[NTD.19$Mode == "HR" & NTD.19$PMT != 0], na.rm = T)
mean(NTD.19$PMT[NTD.19$Mode == "CR" & NTD.19$PMT != 0]/NTD.19$UPT[NTD.19$Mode == "CR" & NTD.19$PMT != 0], na.rm = T)
mean(NTD.19$PMT[NTD.19$Mode == "MB" & NTD.19$PMT != 0]/NTD.19$UPT[NTD.19$Mode == "MB" & NTD.19$PMT != 0], na.rm = T)
View(NTD19_a)
NTD19_b<- NTD19 %>%
group_by(Mode) %>%
summarise(mean_ratio = mean(PMT / DRM))
View(NTD19_b)
mean(NTD.19$PMT[NTD.19$Mode == "HR" & NTD.19$PMT != 0]/NTD.19$DRM[NTD.19$Mode == "HR" & NTD.19$PMT != 0], na.rm = T)
NTD19_c<- NTD19 %>%
group_by(Mode) %>%
summarise(mean_ratio = mean(FARES/ PMT))
View(NTD19_c)
mean(NTD.19$FARES[NTD.19$Mode == "HR" & NTD.19$PMT != 0]/NTD.19$PMT[NTD.19$Mode == "HR" & NTD.19$PMT != 0], na.rm = T)
#d.	Fare recovery ratio
NTD19_d<- NTD19 %>%
group_by(Mode) %>%
summarise(mean_ratio = mean(FARES / OPEXP_TOTAL))
View(NTD19_d)
mean(NTD.19$FARES[NTD.19$Mode == "HR" & NTD.19$PMT != 0]/NTD.19$OPEXP_TOTAL[NTD.19$Mode == "HR" & NTD.19$PMT != 0], na.rm = T)
#e.	Average speed
NTD19_e<- NTD19 %>%
group_by(Mode) %>%
summarise(mean_ratio =mean(VRM / VRH))
View(NTD19_e)
sum(NTD.19$FARES[NTD.19$Mode == "HR" & NTD.19$PMT != 0])/sum(NTD.19$OPEXP_TOTAL[NTD.19$Mode == "HR" & NTD.19$PMT != 0], na.rm = T)
mean(NTD.19$VRM[NTD.19$Mode == "HR" & NTD.19$PMT != 0]/NTD.19$VRH[NTD.19$Mode == "HR" & NTD.19$PMT != 0], na.rm = T)
NTD19_2<- NTD19 %>%
group_by(Mode) %>%
summarise(total_fare_reverse= sum(FARES)/sum(OPEXP_TOTAL))
View(NTD19_2)
sum(NTD.19$FARES[NTD.19$Mode == "HR" & NTD.19$PMT != 0])/sum(NTD.19$OPEXP_TOTAL[NTD.19$Mode == "HR" & NTD.19$PMT != 0], na.rm = T)
#LA plots
##LA does not operate under one transportation authority
subset(NTD.19, City == "Los Angeles")
table(NTD.19$NTD.ID[NTD.19$City == "Los Angeles"])
##Include multiple operators
LA <- subset(NTD.ts, Year > 2001 & VRM > 0 & City == "Los Angeles")
LA <- subset(LA, NTD.ID == 90154 | NTD.ID == 90151 )
LA <- subset(LA, Mode == "HR" | Mode == "LR" | Mode == "MB" | Mode == "CR")
LA$FRR <- LA$FARES / LA$OPEXP_TOTAL
LA$Mode <- as.character(LA$Mode)
LA$Mode[LA$Mode == "MB" & LA$Service == "PT"] <- "MB_PT"
ggplot(LA,  aes(x = Year, y = FRR ,  colour = Mode)) +
geom_line()
#Did not adjust for inflation
subset(LA[c("Year", "UPT", "FARES", "OPEXP_TOTAL", "FRR", "Mode")], Mode == "CR")
subset(LA[c("Year", "UPT","FARES", "OPEXP_TOTAL", "FRR", "Mode")], Mode == "MB")
subset(LA[c("Year", "UPT","FARES", "OPEXP_TOTAL", "FRR", "Mode")], Mode == "MB")
##OTHER USEFUL PLOTS
LA$FARES_PMT <- LA$FARES / LA$PMT
LA$FARES_UPT <- LA$FARES / LA$UPT
ggplot(LA,  aes(x = Year, y = FARES_PMT ,  colour = Mode)) +
geom_line()
ggplot(LA,  aes(x = Year, y = FARES_UPT ,  colour = Mode)) +
geom_line()
ggplot(LA,  aes(x = Year, y = FARES_UPT ,  colour = Mode)) +
geom_line()
ggplot(LA,  aes(x = Year, y = FARES_UPT ,  colour = Mode)) +
geom_line()
ggplot(LA,  aes(x = Year, y = PMT ,  colour = Mode)) +
geom_line()
LA$Mode <- as.character(LA$Mode)
View(LA)
LA1<- NTD.ts %>%
filter(Year>=2002 & Year<=2021) %>%
filter(TRS_ID==90154 | TRS_ID==90151) %>%
filter(Mode=="LR" | Mode=="HR" | Mode=="CR" | Mode=="MB")
View(NTD.ts)
View(NTD.19)
View(LA)
LA1<- NTD.ts %>%
filter(Year>=2002 & Year<=2021) %>%
filter(NTD.ID==90154 | NTD.ID==90151) %>%
filter(Mode=="LR" | Mode=="HR" | Mode=="CR" | Mode=="MB")
View(LA1)
LA1<- NTD.ts %>%
filter(Year>=2002 & Year<=2021) %>%
filter(City=="Los Angeles") %>%
filter(NTD.ID==90154 | NTD.ID==90151) %>%
filter(Mode=="LR" | Mode=="HR" | Mode=="CR" | Mode=="MB")
LA1<- NTD.ts %>%
filter(Year>=2002 & Year<=2021) %>%
filter(City=="Los Angeles") %>%
filter(VRM>0)%>%
filter(NTD.ID==90154 | NTD.ID==90151) %>%
filter(Mode=="LR" | Mode=="HR" | Mode=="CR" | Mode=="MB")
View(LA1)
View(LA)
LA1<- LA1 %>%
mutate(FRR <- FARES / OPEXP_TOTAL)
LA1$Mode[LA$Mode == "MB" & LA$Service == "PT"] <- "MB_PT"
LA1$Mode[LA$Mode == "MB" & LA$Service == "DO"] <- "MB_DO"
View(LA1)
LA1$Mode[LA$Mode == "MB" & LA$Service == "PT"] <- "MB_PT"
View(LA1)
LA1$Mode <- as.character(LA$Mode)
LA1$Mode[LA$Mode == "MB" & LA$Service == "PT"] <- "MB_PT"
LA1$Mode[LA$Mode == "MB" & LA$Service == "DO"] <- "MB_DO"
ggplot(LA,  aes(x = Year, y = FRR ,  colour = Mode)) +
geom_line() +
title("Fare Recovery Ratio for Los Angeles MTA and Southern California Regional Rail Authority") +
xlab("Year") +
ylab("PMT")
ggplot(LA,  aes(x = Year, y = FRR ,  colour = Mode)) +
geom_line() +
ggtitle("Fare Recovery Ratio for Los Angeles MTA and Southern California Regional Rail Authority") +
xlab("Year") +
ylab("PMT")
LA1$Mode <- as.character(LA1$Mode)
LA1$Mode[LA1$Mode == "MB" & LA1Service == "PT"] <- "MB_PT"
View(LA1)
LA1$Mode[LA1$Mode == "MB" & LA1$Service == "PT"] <- "MB_PT"
LA1$Mode[LA1$Mode == "MB" & LA1$Service == "DO"] <- "MB_DO"
ggplot(LA1,  aes(x = Year, y = FRR ,  colour = Mode)) +
geom_line() +
ggtitle("Fare Recovery Ratio for Los Angeles MTA and Southern California Regional Rail Authority") +
xlab("Year") +
ylab("PMT")
View(LA1)
LA1<- LA1 %>%
mutate(FRR= FARES / OPEXP_TOTAL)
ggplot(LA1,  aes(x = Year, y = FRR ,  colour = Mode)) +
geom_line() +
ggtitle("Fare Recovery Ratio for Los Angeles MTA and Southern California Regional Rail Authority") +
xlab("Year") +
ylab("PMT")
ggplot(LA1,  aes(x = Year, y = FRR ,  color = Mode)) +
geom_line() +
ggtitle("Fare Recovery Ratio for Los Angeles MTA and Southern California Regional Rail Authority") +
xlab("Year") +
ylab("PMT")

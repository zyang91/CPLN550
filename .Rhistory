45^-0.1
0^-0.1
45^(-0.1)
45^0.1
45^(-0.2)
30^-0.2
install.packages("rmarkdown")
knitr::opts_chunk$set(echo = TRUE)
summary(cars)
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
library(dplyr)
library(ggplot2)
library(tidyverse)
knitr::opts_chunk$set(echo = TRUE)
setwd("/Users/apple/Desktop/CPLN501")
library(dplyr)
library(ggplot2)
setwd("/Users/apple/Desktop/CPLN501")
load('baltimore_census.rda')
load('census_tracts.Rda')
head(baltimore)
head(dat2000)
bmore <- baltimore %>%
rename(tract_fips = tract_id,
total_pop = population) %>%
mutate(poverty_rate = pop_poverty/total_pop,
pop_density = total_pop/area,
region_new = recode(fake_region,
`east` = "Region1",
`west` = "Region2",
`north` = "Region3",
`south` = "Region4"),
pop_category = cut(total_pop,
breaks=c(0, 2062, 2917, 3862, 6612),
quartile (run summary)
bmore<- baltimore %>%
rename(tract_fips= tract_id,
total_pop=population)%>%
mutate(poverty_rate= pop_poverty/total_pop,
pop_density= total_pop/land_area,
region_new=recode(fake_region,
`east` = "Region1",
`west` = "Region2",
`north` = "Region3",
`south` = "Region4"))%>%
pop_category = cut(total_pop,
breaks=c(0, 2062, 2917, 3862, 6612),
labels=c("Q1","Q2","Q3","Q4")) %>%
select(-tract_name, -fake_region) %>%
filter(region_new == "Region1" | region_new == "Region3")
bmore<- baltimore %>%
rename(tract_fips= tract_id,
total_pop=population)%>%
mutate(poverty_rate= pop_poverty/population,
pop_density= population/land_area,
region_new=recode(fake_region,
`east` = "Region1",
`west` = "Region2",
`north` = "Region3",
`south` = "Region4"))%>%
pop_category = cut(total_pop,
breaks=c(0, 2062, 2917, 3862, 6612),
labels=c("Q1","Q2","Q3","Q4")) %>%
select(-tract_name, -fake_region) %>%
filter(region_new == "Region1" | region_new == "Region3")
View(baltimore)
bmore<- baltimore %>%
rename(tract_fips= tract_id,
population=population)%>%
mutate(poverty_rate= pop_poverty/population,
pop_density= population/land_area,
region_new=recode(fake_region,
`east` = "Region1",
`west` = "Region2",
`north` = "Region3",
`south` = "Region4"))%>%
pop_category = cut(total_pop,
breaks=c(0, 2062, 2917, 3862, 6612),
labels=c("Q1","Q2","Q3","Q4")) %>%
select(-tract_name, -fake_region) %>%
filter(region_new == "Region1" | region_new == "Region3")
bmore<- baltimore %>%
rename(tract_fips= tract_id,
population=population)%>%
mutate(poverty_rate= pop_poverty/population,
pop_density= population/land_area,
region_new=recode(fake_region,
`east` = "Region1",
`west` = "Region2",
`north` = "Region3",
`south` = "Region4"))%>%
pop_category = cut(population,
breaks=c(0, 2062, 2917, 3862, 6612),
labels=c("Q1","Q2","Q3","Q4")) %>%
select(-tract_name, -fake_region) %>%
filter(region_new == "Region1" | region_new == "Region3")
bmore<- baltimore %>%
rename(tract_fips= tract_id,
population=population)%>%
mutate(poverty_rate= pop_poverty/population,
pop_density= population/land_area,
region_new=recode(fake_region,
`east` = "Region1",
`west` = "Region2",
`north` = "Region3",
`south` = "Region4"))%>%
pop_category = cut(population,
breaks=c(0, 2062, 2917, 3862, 6612),
labels=c("Q1","Q2","Q3","Q4")) %>%
select(-tract_name, -fake_region) %>%
filter(region_new == "Region1" | region_new == "Region3")
bmore <- baltimore %>% # %>% means piping, or carry previous object to next step
rename(tract_fips = tract_id, # new name = current name
total_pop = population) %>% # tidyverse does not require $ when dealing with column names
mutate(poverty_rate = pop_poverty/total_pop, #creating new variables
pop_density = total_pop/area,
region_new = recode(fake_region, # recoding regions to something more descriptive
`east` = "Region1",
`west` = "Region2",
`north` = "Region3",
`south` = "Region4"),
pop_category = cut(total_pop,
breaks=c(0, 2062, 2917, 3862, 6612), # recategorizing population by quartile (run summary)
labels=c("Q1","Q2","Q3","Q4"))) %>%
select(-tract_name, -fake_region) %>% # delete certain columns, alternatively, keep certain columns without the - sign
filter(region_new == "Region1" | region_new == "Region3")
bmore <- baltimore %>% # %>% means piping, or carry previous object to next step
rename(tract_fips = tract_id, # new name = current name
total_pop = population) %>% # tidyverse does not require $ when dealing with column names
mutate(poverty_rate = pop_poverty/total_pop, #creating new variables
pop_density = total_pop/area,
region_new = recode(fake_region, # recoding regions to something more descriptive
`east` = "Region1",
`west` = "Region2",
`north` = "Region3",
`south` = "Region4"),
pop_category = cut(total_pop,
breaks=c(0, 2062, 2917, 3862, 6612), # recategorizing population by quartile (run summary)
labels=c("Q1","Q2","Q3","Q4"))) %>%
select(-tract_name, -fake_region) %>% # delete certain columns, alternatively, keep certain columns without the - sign
filter(region_new == "Region1" | region_new == "Region3")
ggplot(dat2010, aes(x=pop)) +
geom_histogram(col="black",
fill="#225566",
alpha = .5,
binwidth = 200) +
labs(x="population", y="counts") +
ggtitle("Population 2010")
dat2010 %>% mutate(perc.white = pop_white_nonhispanic/pop,
majority = cut(perc.white,
breaks = c(0, 0.5, 1),
labels = c("nonwhite", "white"))) %>%
filter(majority == "white") %>%
ggplot(aes(x=pop)) +
geom_histogram(col="black", fill="white",alpha = .5, binwidth = 200) +
labs(x="population", y="counts") +
ggtitle("Population 2010")
dat2000 %>%
mutate(perc.white = pop_white_nonhispanic/pop,
majority = cut(perc.white,
breaks = c(0, 0.5, 1),
labels = c("nonwhite", "white"))) %>%
drop_na(majority) %>%
ggplot(., aes(x = pop, y = pop_plus10, color = majority)) +
geom_point(size = 2) +
scale_color_manual(values=c("#999999", "#E69F00")) +
xlim(0, 8000) +
labs(x="pop 2000", y="pop 2010") +
geom_smooth(method = "lm", color = "red", se=FALSE)
dat2010 %>% mutate(perc.white = pop_white_nonhispanic/pop,
majority = cut(perc.white,
breaks = c(0, 0.5, 1),
labels = c("nonwhite", "white"))) %>%
drop_na(majority) %>%
ggplot(., aes(x=majority, y=median_hh_income,
fill = majority)) +
geom_boxplot(alpha = 0.7) +
labs(x="Race", y="Median HH Income") +
scale_fill_manual(values=c("#336699", "#666666"))
library(tidyverse)
setwd("/Users/apple/Desktop/CPLN501")
library(tidyverse)
setwd("/Users/apple/Desktop/CPLN501")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(sf)
library(nngeo)
library(units)
library(pacman)
library(lubridate)
library(tidycensus)
#set the API key
census_api= "7ef485ab67cffa9e33a4d14f97aae395bb5c011c"
census_api_key(census_api, install = TRUE)
acs_2022 <- load_variables(2022, dataset="acs5")
acsVaraibles <- c(totpop = "B01001_001",
tot_commute="B08006_001",
bikers ="B08006_014",
median_age="B01002_001"
)
Philiy_acs_2022 <- get_acs(geography="tract",
variables=acsVaraibles,
state="PA",
county="Philadelphia",
survey='acs5',
year=2022,
output="wide",
geometry=TRUE)
View(Philiy_acs_2022)
Philiy_acs_2022 <- Philiy_acs_2022 %>%
mutate(bike_rate = bikers/tot_commute)
Philiy_acs_2022 <- Philiy_acs_2022 %>%
mutate(bike_rate = bikersE/tot_commuteE)
st_write(Philiy_acs_2022, "Philiy_acs_2022.gpkg")
setwd("/Users/apple/Desktop/CPLN550")
#required packages
library(idyverse)
#required packages
library(tidyverse)
#load required data
hh <- read.csv("data/1_Household_Public.csv")
per <- read.csv("data/2_Person_Public.csv")
veh <- read.csv("data/3_Vehicle_Public.csv")
trip <- read.csv("data/4_Trip_Public.csv")
View(trip)
View(trip)
#Question 6
trip <- trip %>%
mutate(weighted_travel_time= Model_TravTime*P_WEIGHT)
total_weighted_travel_time <- sum(trip$weighted_travel_time, na.rm = TRUE)
total_weighted <- sum(trip$P_WEIGHT, na.rm = TRUE)
average_weighted_travel_time <- total_weighted_travel_time/total_weighted
total_weighted/60
total_weighted_travel_time/60
#Question 7
biketrip <- trip %>%
filter(MODE_AGG == 2) %>%
mutate(weighted_travel_time= Model_TravTime*P_WEIGHT)
total_bike <- sum(biketrip$P_WEIGHT, na.rm = TRUE)
total_bike_time <- sum(biketrip$weighted_travel_time, na.rm = TRUE)
average_bike_time <- total_bike_time/total_bike
total_bike_time/total_weighted_travel_time
total_bike_time/total_weighted_travel_time*100
